## 笔记自动保存功能优化计划

### 问题分析

当前笔记自动保存功能存在的问题：

* 用户每输入一个字符就触发一次保存请求

* 频繁的 API 请求导致卡顿和性能问题

* 没有合理的延迟机制来优化用户体验

### 优化方案

1. **添加防抖机制**：设置300秒的自动保存间隔，减少频繁的 API 请求
2. **使用 useRef 保存定时器**：确保组件重新渲染时不会丢失定时器引用
3. **使用 useEffect 清理资源**：组件卸载时清除定时器，避免内存泄漏
4. **使用 useCallback 优化性能**：减少不必要的函数重新创建
5. 添加手动保存按钮。

### 具体实现步骤

1. 在 NoteDetail 组件中添加防抖定时器 ref
2. 定义防抖处理函数，延迟1秒调用 onUpdateNote
3. 修改 handleTitleChange 和 handleContentChange 函数，使用防抖处理
4. 添加 useEffect 清理函数，在组件卸载时清除定时器
5. 添加手动保存按钮
6. 测试优化后的功能，确保自动保存正常工作且不卡顿

   <br />

### 预期效果

* 用户编辑笔记时，实时更新本地状态，提供流畅的编辑体验

* 300秒后自动保存到服务器，减少 API 请求次数

* 组件卸载时自动清理资源，避免内存泄漏

* 保持原有的组件结构和 API 设计，无需修改其他模块

* 点击保存按钮，触发保存到数据库。

### 技术要点

* 使用 `useRef` 保存防抖定时器

* 使用 `useCallback` 优化回调函数性能

* 使用 `useEffect` 实现组件生命周期管理

* 防抖机制减少网络请求，提升系统性能

